<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8" />
        <title>Raw JavaScript</title>
    </head>

    <body style="text-align: center; margin-left: auto; margin-right: auto">
        <script type="module">
            import { prime } from "./prime.js";

            async function calculatePrime() {
                var row = this.parentNode.parentNode;
                var num = row.getElementsByClassName("number")[0].value;
                var primNode = row.getElementsByClassName("prime")[0];
                var timeNode = row.getElementsByClassName("time")[0];
                primNode.textContent = "";
                timeNode.textContent = "";

                var maxPrime;
                var startTime, endTime;

                startTime = new Date().getTime();
                maxPrime = prime(num);
                endTime = new Date().getTime();

                primNode.textContent = maxPrime;
                timeNode.textContent = endTime - startTime;
            }

            var buttons = document.getElementsByClassName("runButton");
            for (var i = 0; i < buttons.length; i++) {
                buttons.item(i).addEventListener("click", calculatePrime);
            }
        </script>

        <h1>Calculate Max Prime in Raw JavaScript</h1>
        <pre>
Calculate max prime below "N" using the method of Sieve of Eratosthenes.
Push "Run", then the table shows the max prime below "N" and the calculation time.
Note if "N" is less than 2, the program returns 0 as max prime.
        </pre>
        <table border="1" align="center">
            <thead>
                <tr>
                    <th>#</th>
                    <th>N</th>
                    <th>max prime</th>
                    <th>time [ms]</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td><input type="number" class="number" value="1" /></td>
                    <td class="prime"></td>
                    <td class="time"></td>
                    <td><button class="runButton">Run</button></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td><input type="number" class="number" value="2" /></td>
                    <td class="prime"></td>
                    <td class="time"></td>
                    <td><button class="runButton">Run</button></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td><input type="number" class="number" value="3" /></td>
                    <td class="prime"></td>
                    <td class="time"></td>
                    <td><button class="runButton">Run</button></td>
                </tr>
                <tr>
                    <td>4</td>
                    <td><input type="number" class="number" value="10" /></td>
                    <td class="prime"></td>
                    <td class="time"></td>
                    <td><button class="runButton">Run</button></td>
                </tr>
                <tr>
                    <td>5</td>
                    <td><input type="number" class="number" value="100" /></td>
                    <td class="prime"></td>
                    <td class="time"></td>
                    <td><button class="runButton">Run</button></td>
                </tr>
                <tr>
                    <td>6</td>
                    <td><input type="number" class="number" value="1000" /></td>
                    <td class="prime"></td>
                    <td class="time"></td>
                    <td><button class="runButton">Run</button></td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>
                        <input type="number" class="number" value="10000" />
                    </td>
                    <td class="prime"></td>
                    <td class="time"></td>
                    <td><button class="runButton">Run</button></td>
                </tr>
                <tr>
                    <td>8</td>
                    <td>
                        <input type="number" class="number" value="100000" />
                    </td>
                    <td class="prime"></td>
                    <td class="time"></td>
                    <td><button class="runButton">Run</button></td>
                </tr>
                <tr>
                    <td>9</td>
                    <td>
                        <input type="number" class="number" value="1000000" />
                    </td>
                    <td class="prime"></td>
                    <td class="time"></td>
                    <td><button class="runButton">Run</button></td>
                </tr>
                <tr>
                    <td>10</td>
                    <td>
                        <input type="number" class="number" value="10000000" />
                    </td>
                    <td class="prime"></td>
                    <td class="time"></td>
                    <td><button class="runButton">Run</button></td>
                </tr>
            </tbody>
        </table>
    </body>
</html>
